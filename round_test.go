// Copyright 2014 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

package round

import (
	"testing"
	"time"
)

func TestDurationN(t *testing.T) {
	tests := [][]int64{
		{1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
		{12, 10, 12, 12, 12, 12, 12, 12, 12, 12},
		{123, 100, 120, 123, 123, 123, 123, 123, 123, 123},
		{1234, 1000, 1200, 1230, 1234, 1234, 1234, 1234, 1234, 1234},
		{12345, 10000, 12000, 12300, 12350, 12345, 12345, 12345, 12345, 12345},
		{123456, 100000, 120000, 123000, 123500, 123460, 123456, 123456, 123456, 123456},
		{1234567, 1000000, 1200000, 1230000, 1235000, 1234600, 1234570, 1234567, 1234567, 1234567},
		{12345678, 10000000, 12000000, 12300000, 12350000, 12346000, 12345700, 12345680, 12345678, 12345678},
		{123456789, 100000000, 120000000, 123000000, 123500000, 123460000, 123457000, 123456800, 123456790, 123456789},
		{1234567890, 1000000000, 1200000000, 1230000000, 1235000000, 1234600000, 1234570000, 1234568000, 1234567900, 1234567890},
		{12345678900, 10000000000, 12000000000, 12300000000, 12350000000, 12346000000, 12345700000, 12345680000, 12345679000, 12345678900},
		{83456789000, 60000000000, 80000000000, 83000000000, 83500000000, 83460000000, 83457000000, 83456800000, 83456790000, 83456789000},
		{754567890000, 600000000000, 780000000000, 750000000000, 755000000000, 754600000000, 754570000000, 754568000000, 754567900000, 754567890000},
		{3623678900000, 3600000000000, 3600000000000, 3620000000000, 3624000000000, 3623700000000, 3623680000000, 3623679000000, 3623678900000, 3623678900000},
		{5025678900000, 3600000000000, 4800000000000, 5040000000000, 5030000000000, 5026000000000, 5025700000000, 5025680000000, 5025679000000, 5025678900000},
		{45263789000000, 36000000000000, 46800000000000, 45000000000000, 45240000000000, 45260000000000, 45264000000000, 45263800000000, 45263790000000, 45263789000000},
		{445554789000000, 360000000000000, 432000000000000, 446400000000000, 445800000000000, 445560000000000, 445550000000000, 445555000000000, 445554800000000, 445554790000000},
		{4447933890000000, 3600000000000000, 4320000000000000, 4464000000000000, 4449600000000000, 4447800000000000, 4447920000000000, 4447930000000000, 4447934000000000, 4447933900000000},
	}
	for _, test := range tests {
		d := time.Duration(test[0])
		for n := 1; n < len(test); n++ {
			exp := time.Duration(test[n])
			if val := DurationN(d, n); val != exp {
				t.Errorf("RoundN(%d, %d); expected: %d (%s); got: %d (%s)\n", d, n, exp, exp, val, val)
			}
			if val := DurationN(-d, n); val != -exp {
				t.Errorf("RoundN(%d, %d); expected: %d (%s); got: %d (%s)\n", -d, n, -exp, -exp, val, val)
			}
		}
	}
}
